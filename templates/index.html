{% extends "base.html" %}
{% block content %}
<!-- Header/Banner First -->
<div class="header">
    <div class="header-content">
        <h1>Video Content Analysis</h1>
        <p>AI-powered content moderation and policy violation detection</p>
    </div>
</div>

<!-- Upload Section Below Banner -->
<div class="container">
    <!-- Upload Section -->
    <div class="upload-section">
        <button id="uploadTrigger" class="upload-button">
            <span class="button-icon">üì§</span>
            <span class="button-text">Upload Video for Analysis</span>
        </button>
        <p class="upload-hint">Supported formats: MP4, AVI, MOV (Max 2GB)</p>
    </div>

    <!-- Feature Cards -->
    <div class="features-grid">
        <div class="feature-card">
            <div class="feature-icon">üéØ</div>
            <h3>Policy Violation Detection</h3>
            <p>Automatically identify content that violates community guidelines</p>
        </div>

        <div class="feature-card">
            <div class="feature-icon">‚ö°</div>
            <h3>Real-time Analysis</h3>
            <p>Frame-by-frame video content analysis with AI precision</p>
        </div>

        <div class="feature-card">
            <div class="feature-icon">üìä</div>
            <h3>Detailed Reports</h3>
            <p>Comprehensive violation reports with timestamps</p>
        </div>
    </div>

    <!-- Upload Modal -->
    <div id="uploadModal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>Upload Video</h2>
                <button class="close-button" id="closeModal">√ó</button>
            </div>

            <div class="modal-body">
                <form id="uploadForm">
                    <div class="dropzone" id="dropZone">
                        <input type="file" id="fileInput" accept="video/*" hidden>
                        <div class="dropzone-content">
                            <div class="upload-icon">üì§</div>
                            <p class="upload-text">Drop your video here or click to browse</p>
                            <div class="upload-info">
                                <div class="info-item">
                                    <span class="info-icon">‚è±Ô∏è</span>
                                    <span>4sec-30min</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-icon">üîä</span>
                                    <span>Audio Required</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-icon">üì∫</span>
                                    <span>360p-4k</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-icon">üìÅ</span>
                                    <span>‚â§2GB</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="selectedFile" class="selected-file hidden"></div>

                    <div class="modal-footer">
                        <button type="button" id="cancelBtn" class="btn btn-secondary">Cancel</button>
                        <button type="submit" id="uploadBtn" class="btn btn-primary" disabled>
                            <span class="btn-text">Upload & Analyze</span>
                            <div class="spinner hidden"></div>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Processing Overlay -->
    <div id="processingOverlay" class="processing-overlay hidden">
        <div class="processing-content">
            <div class="processing-header">
                <div id="videoThumbnail" class="video-thumbnail">
                    <!-- Thumbnail will be inserted here -->
                </div>
                <div class="processing-info">
                    <h3>Processing Video</h3>
                    <div class="loader-container">
                        <div class="analysis-loader">
                            <div class="loader-bar"></div>
                        </div>
                        <p class="processing-status">Analyzing content and detecting violations...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Section -->
    <div id="resultsSection" class="results-section hidden">
        <div class="results-header">
            <h2>Analysis Report</h2>
            <div id="reportTimestamp" class="report-timestamp"></div>
        </div>
        
        <div class="results-content">
            <div class="video-section">
                <div id="videoPlayer" class="video-player"></div>
                <div id="videoInfo" class="video-info"></div>
            </div>

            <div class="analysis-section">
                <div id="violationSummary" class="violation-summary"></div>
                <div id="analysisResults" class="detailed-analysis"></div>
            </div>
        </div>
    </div>
</div>
{% endblock %}